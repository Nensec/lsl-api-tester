{
  "$schema": "https://raw.githubusercontent.com/Nensec/lsl-api-tester/refs/heads/master/test-suite.schema.json",
  "name": "Collective API",
  "version": "1.2.71",
  "tests": [
    {
      "ADD_AND_REMOVE": {
        "d": [],
        "a": [
          "ADD_TESTER",
          "WAIT_FOR_CONFIRM",
          "REMOVE_TESTER",
          {
            "n": "Ask if device removed",
            "a": 1,
            "p": [
              "Did the device get removed?"
            ]
          }
        ]
      }
    },
    {
      "ATTACH_REMOVE": {
        "d": [],
        "a": [
          "ATTACH_DUMMY",
          {
            "n": "Relay add",
            "a": 4,
            "p": [
              "$ATTACH",
              "$IB",
              "add Relay",
              0
            ]
          },
          {
            "n": "Kill relay",
            "a": 0,
            "p": [
              "$ATTACH",
              "$TESTCHANNEL",
              "die"
            ]
          },
          {
            "n": "Ask if device removed",
            "a": 5,
            "p": [
              "Did the relay device get removed automatically?"
            ]
          }
        ]
      }
    },
    {
      "ADDCOMMAND": {
        "d": [
          "ADD_AND_REMOVE"
        ],
        "a": [
          "ADD_TESTER",
          "WAIT_FOR_CONFIRM",
          {
            "n": "Send add command",
            "a": 0,
            "p": [
              "$AV",
              "$IB",
              "add-command Test"
            ]
          },
          {
            "n": "Ask if command added",
            "a": 1,
            "p": [
              "Did the command get added?"
            ]
          },
          {
            "n": "Remove commands command",
            "a": 0,
            "p": [
              "$AV",
              "$IB",
              "remove-commands",
              ""
            ]
          },
          {
            "n": "Ask if commands removed",
            "a": 1,
            "p": [
              "Did the command get removed?"
            ]
          },
          "REMOVE_TESTER"
        ]
      }
    },
    {
      "FOLLOW": {
        "d": [
          "ADD_AND_REMOVE"
        ],
        "a": [
          "REZ_DUMMY",
          "ADD_TESTER",
          "WAIT_FOR_CONFIRM",
          {
            "n": "Send follow command",
            "a": 0,
            "p": [
              "$AV",
              "$IB",
              "follow $DUMMY"
            ]
          },
          "REMOVE_TESTER"
        ]
      }
    },
    {
      "IDENTIFY": {
        "d": [
          "ADD_AND_REMOVE"
        ],
        "a": [
          {
            "n": "Send identify",
            "a": 0,
            "p": [
              "$AV",
              "$IB",
              "identify"
            ]
          },
          {
            "n": "Identification",
            "a": 3,
            "p": [
              "$IB",
              "identification*",
              500,
              1
            ]
          },
          {
            "n": "Owners",
            "a": 3,
            "p": [
              "$IB",
              "owners*",
              500,
              1
            ]
          },
          {
            "n": "Software",
            "a": 3,
            "p": [
              "$IB",
              "software*",
              500,
              1
            ]
          }
        ]
      }
    }
  ],
  "commonActions": [
    {
      "ADD_TESTER": {
        "n": "Add tester",
        "a": 0,
        "p": [
          "$AV",
          "$IB",
          "add Tester"
        ]
      }
    },
    {
      "WAIT_FOR_CONFIRM": {
        "n": "Confirm add",
        "a": 3,
        "p": [
          "$IB",
          "add-confirm*",
          500,
          1
        ]
      }
    },
    {
      "REMOVE_TESTER": {
        "n": "Remove tester",
        "a": 0,
        "p": [
          "$AV",
          "$IB",
          "remove Tester"
        ]
      }
    }
  ]
}
